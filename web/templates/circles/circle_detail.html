{% extends "base.html" %}
{% block title %}{{ circle.name }} · Circle{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h2 class="h4 mb-1">{{ circle.name }}</h2>
    <div class="text-muted small">
      {% if circle.is_public %}Public{% else %}Private{% endif %} • {{ circle.members.count }} member{{ circle.members.count|pluralize }}
    </div>
  </div>
  <div class="d-flex gap-2">
    <a class="btn btn-outline-primary disabled" aria-disabled="true">Join (soon)</a>
    <a class="btn btn-primary" href="{% url 'circles:post_create' slug=circle.slug %}">Create Post</a>
  </div>
</div>

<div class="card p-3 shadow-sm mb-3">
  <p class="mb-0 text-muted">{{ circle.description|default:"No description yet." }}</p>
</div>

<div class="card p-3 shadow-sm">
  <h5 class="mb-2">Posts</h5>
  {% if posts %}
    <div class="list-group list-group-flush">
      {% for p in posts %}
      <a class="list-group-item list-group-item-action" href="{% url 'circles:post_detail' slug=circle.slug pk=p.pk %}">
        <div class="d-flex justify-content-between">
          <strong>{{ p.title }}</strong>
          <small class="text-muted">{{ p.created_at|date:"M j, Y, g:i a" }}</small>
        </div>
        {% if p.link_url %}
          <div class="small text-muted">{{ p.link_url }}</div>
        {% endif %}
        {% if p.body %}
          <div class="text-muted small mt-1">{{ p.body|truncatewords:30 }}</div>
        {% endif %}
        <div class="small text-muted mt-1">by {{ p.author }}</div>
      </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted mb-0">No posts yet.</p>
  {% endif %}
</div>
{% endblock %}